import styles from '../styles/Search.module.scss'
import Head from "next/head";
import {useRouter} from "next/router";
import Home from "./index";
import Result from "../components/result";

function Search(){
    const router = useRouter()
    const submitSearch = async (event: any) => {
        event.preventDefault()
        await router.push({
            pathname: '/search',
            query: {q: event.target.elements.search.value}},
        )
    }
    // sendQ(router.query).then(r => (alert("it works")))
    // const data = JSON.parse("../data/output.ts")
    // console.log(data)
    let results = [
        {link: "https://www.youtube.com", heading: "YouTube"},
        {link: "https://www.google.com", heading: "Google"}
    ]

    return (
        <div className={styles.container}>
            <Head>
                <title>ultimEngine</title>
                <meta name="description" content="Generated by create next app" />
                <link rel="icon" href="/favicon.ico" />
            </Head>
            <div className={styles.search}>
                <form className={styles.form} onSubmit={submitSearch}>
                    <input id="search" name="search" placeholder="Search..." required={true}/>
                    <button type="submit">Search</button>
                </form>
            </div>
            <main className={styles.main}>
                <Result data={results[0]}/>
                <Result data={results[1]}/>
            </main>
        </div>
    )
}

export default Search

/*async function sendQ(query: any){
    let question = JSON.stringify({q: query})
    let fs = require('fs');
    fs.writeFile("../data/input.json", question, function(err: any) {
        if (err) {
            console.log(err);
        }
    });
    let response = await JSON.parse('../data/output.ts')
}*/